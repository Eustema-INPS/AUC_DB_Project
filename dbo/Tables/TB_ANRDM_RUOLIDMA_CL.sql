CREATE TABLE [dbo].[TB_ANRDM_RUOLIDMA_CL] (
    [ANRDM_BDSO_ID_VA_SER_PK]     BIGINT       NOT NULL,
    [ANRDM_BDSO_ID_VA_APP_PK]     BIGINT       NOT NULL,
    [ANRDM_BDSO_ID_VA_DIC_PK]     BIGINT       NOT NULL,
    [ANRDM_DATA_INIZ_PK]          DATE         NOT NULL,
    [ANRDM_DATA_FINE]             DATE         CONSTRAINT [DF_TB_ANRDM_RUOLIDMA_CL_ANRDM_DATA_FINE] DEFAULT (CONVERT([date],'9999-12-31',(0))) NOT NULL,
    [ANRDM_COD_UTENTE]            VARCHAR (16) NOT NULL,
    [ANRDM_DATA_AGGIORN]          DATE         CONSTRAINT [DF_TB_ANRDM_RUOLIDMA_CL_ANRDM_DATA_AGGIORN] DEFAULT (getdate()) NOT NULL,
    [ANRDM_COD_APPL]              VARCHAR (2)  NOT NULL,
    [ANRDM_DESCR_INTERVENTO]      VARCHAR (50) NULL,
    [ANRDM_DATA_SISTEMA]          DATETIME     NULL,
    [ANRDM_AUC_CODICE_PK]         BIGINT       IDENTITY (1, 1) NOT NULL,
    [ANRDM_AUC_DATA_INSERIMENTO]  DATETIME     CONSTRAINT [DF_TB_ANRDM_RUOLIDMA_CL_AUC_DATA_INSERIMENTO] DEFAULT (getdate()) NULL,
    [ANRDM_AUC_STATO_LAVORAZIONE] INT          CONSTRAINT [DF_TB_ANRDM_RUOLIDMA_CL_AUC_STATO_LAVORAZIONE] DEFAULT ((0)) NULL,
    [ANRDM_AUC_CF_SER_PK]         VARCHAR (16) NULL,
    [ANRDM_AUC_CF_APP_PK]         VARCHAR (16) NULL,
    [ANRDM_AUC_CF_DIC_PK]         VARCHAR (16) NULL,
    [ANRDM_AUC_AUSCA_SER_PK]      INT          CONSTRAINT [DF_TB_ANRDM_RUOLIDMA_CL_ANRDM_AUC_AUSCA_SER_PK] DEFAULT ((0)) NULL,
    [ANRDM_AUC_AUSCA_APP_PK]      INT          CONSTRAINT [DF_TB_ANRDM_RUOLIDMA_CL_ANRDM_AUC_AUSCA_APP_PK] DEFAULT ((0)) NULL,
    [ANRDM_AUC_AUSCA_DIC_PK]      INT          CONSTRAINT [DF_TB_ANRDM_RUOLIDMA_CL_ANRDM_AUC_AUSCA_DIC_PK] DEFAULT ((0)) NULL,
    [ANRDM_AUC_PRESENTE]          INT          CONSTRAINT [DF_TB_ANRDM_RUOLIDMA_CL_ANRDM_AUC_PRESENTE] DEFAULT ((0)) NULL,
    CONSTRAINT [PK_ANRDM_RUOLIDMA] PRIMARY KEY CLUSTERED ([ANRDM_BDSO_ID_VA_SER_PK] ASC, [ANRDM_BDSO_ID_VA_APP_PK] ASC, [ANRDM_BDSO_ID_VA_DIC_PK] ASC, [ANRDM_DATA_INIZ_PK] ASC),
    CONSTRAINT [CK1_ANRDM_DATE_INIZ_FINE] CHECK ([ANRDM_DATA_FINE]>=[ANRDM_DATA_INIZ_PK]),
    CONSTRAINT [FK1_ANRDM_BDSO] FOREIGN KEY ([ANRDM_BDSO_ID_VA_SER_PK]) REFERENCES [dbo].[BDSO_SOCIETA_CL] ([BDSO_ID_VA]),
    CONSTRAINT [FK2_ANRDM_BDSO] FOREIGN KEY ([ANRDM_BDSO_ID_VA_APP_PK]) REFERENCES [dbo].[BDSO_SOCIETA_CL] ([BDSO_ID_VA]),
    CONSTRAINT [FK3_ANRDM_BDSO] FOREIGN KEY ([ANRDM_BDSO_ID_VA_DIC_PK]) REFERENCES [dbo].[BDSO_SOCIETA_CL] ([BDSO_ID_VA])
);

